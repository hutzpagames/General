var qrcode=function(){var t,r,e,n,o,i,a,u,f,c,s,l,d,g,h,p,v,w,m,y,b,A,C,B,T,E,S,R,_,L,k,O,P,D,M,I,x,N,$,U,W,G,F,H,K,z,V,J,Y,X,Z=function(){function t(t,r){if(void 0===t.length)throw new Error(t.length+"/"+r);for(var e=0;e<t.length&&0==t[e];)e++;for(var n=new Array(t.length-e+r),o=0;o<t.length-e;o++)n[o]=t[o+e];return n}function r(t,r){for(var e=0;e<t.length;e++)r.push(t[e]);return r}function e(t,r){for(var e=0;e<t.length;e++)t[e]^=r[e];return t}function n(t,r){for(var e=I.log(t),n=I.log(r),o=new Array(e.length+n.length-1),i=0;i<e.length;i++)for(var a=0;a<n.length;a++)o[i+a]^=I.exp(e[i]+n[a]);return o}function o(t,r){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=t[n];for(n=0;n<=t.length-r.length;n++){for(var i=e[n],a=0;a<r.length;a++)e[n+a]^=I.exp(I.log(r[a])+i);}return e}function i(r,e){for(var n=t(r,e-r.length),i=o(n,t(function(t){for(var r=new Array(t),e=0;e<t;e++)r[e]=0;return r[t-1]=1,r}(e),[1])),a=new Array(r.length-i.length),u=0;u<a.length;u++)a[u]=r[u]^i[u];for(var f=0;f<e-r.length;f++)a.push(0);return function(t,r){if(t.length>r)return t;for(var e=new Array(r),n=0;n<t.length;n++)e[n+r-t.length]=t[n];return e}(a,e)}function a(t){for(var r=1;t>r;)r<<=1;return r}function u(t,r,e,n){for(var o,i,a,f=[],c=[],s=0;t>s;s++)if(0!=s%n)c.push(s);else for(a=0;e>a;a++)c.push(s),f.push(a);return o=r/c.length,i=r%c.length,function(r,e,n){for(var o=new Array(c.length),a=0;a<c.length;a++){var u=a<i?o+1:o,s=c[a];if(0>s){var l=Math.floor(a/t);o[a]=function(t,r,e,n,o,i){for(var a=0;o>a;a++)t[n*o+a]=r[e*o+a],t[e*o+a]=i[a]}}else{var d=Math.floor(s/e)*e*u,g=s%e;o[a]=function(t,r,e,n,o){for(var i=0;o>i;i++)t[n+i]=r[e+i]}}}}}var I=function(t){for(var r=new Array(t),e=new Array(t),n=0;t>n;n++){r[n]=n,e[n]=n;}for(var o=1,i=2,a=0;255>a;a++){o^=i,i<<=1,i>255&&(i^=285);for(var u=0;t>u;u++)r[u]==o&&(e[o]=u),e[u]==o&&(r[o]=u)}var f={glog:function(t){if(1>t)throw new Error("glog("+t+")");return e[t]},gexp:function(t){for(;0>t;)t+=255;for(;t>=256;)t-=255;return r[t]}},c=new Array(256);for(n=0;8<n;n++)c[n]=1<<n;for(n=8;256>n;n++)c[n]=c[n-4]^c[n-5]^c[n-6]^c[n-8];var s=function(t,r){var e=t.length,n=new Array;for(o=0;e>o;o++){for(var i=t[o],a=0;8>a;a++)n.push(i>>a&1);}var u=8*e;for(o=0;r>o;o++)n.push(0);var f=r+u;for(f%8!=0&&new Error("length wrong"),o=0;f/8>o;o++)n.push(0);for(var s=[17,34,51,68,85,102,119,136,153,170,187,204,221,238,17,34],l=new Array(f/8),d=0;d<l.length;d++){var g=0;n[8*d]&1&&(g^=128),n[8*d+1]&1&&(g^=64),n[8*d+2]&1&&(g^=32),n[8*d+3]&1&&(g^=16),n[8*d+4]&1&&(g^=8),n[8*d+5]&1&&(g^=4),n[8*d+6]&1&&(g^=2),n[8*d+7]&1&&(g^=1),l[d]=g^s[d]}for(var h=new Array(l.length+r),p=0;p<l.length;p++)h[p]=l[p];var v=x.getPositions(r),w=i(l,v);for(p=0;p<v.length;p++)h[l.length+p]=w[p];return h};return s.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[4,33,15,2,34,16],[4,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,60,22,2,61,23],[4,60,18,2,61,19],[2,146,116],[3,58,36,2,59,37],[4,58,20,4,59,21],[4,58,16,4,59,17],[4,174,138],[2,86,68,2,87,69],[6,43,27,2,44,28],[6,43,19,2,44,20],[4,196,156],[4,98,78,2,99,79],[6,49,31,2,50,32],[6,49,23,4,50,24],[5,104,81,1,105,82],[5,52,32,1,53,33],[4,36,12,8,37,13],[4,40,14,9,41,15],[3,120,96,1,121,97],[4,60,38,5,61,39],[4,60,22,7,61,23],[4,60,16,11,61,17],[5,132,106,1,133,107],[5,66,41,1,67,42],[5,41,15,10,42,16],[5,45,15,10,46,16],[5,150,120,1,151,121],[5,75,47,1,76,48],[10,37,13,2,38,14],[3,45,15,13,46,16],[1,168,134],[6,84,67,1,85,68],[6,42,26,8,43,27],[1,53,15,18,54,16],[8,180,144],[4,90,72,4,91,73],[2,50,22,17,51,23],[10,45,15,4,46,16],[9,206,164],[4,103,82,5,104,83],[11,51,21,5,52,22],[11,51,15,5,52,16],[9,241,192],[5,120,96,4,121,97],[11,60,22,5,61,23],[11,60,16,7,61,17],[8,256,204],[5,128,102,4,129,103],[4,64,24,14,65,25],[11,54,16,14,55,17],[12,271,216],[6,135,108,3,136,109],[12,67,27,4,68,28],[3,54,16,18,55,17],[12,293,232],[8,146,116,2,147,117],[1,58,20,19,59,21],[6,54,16,17,55,17],[13,322,254],[7,161,128,4,162,129],[17,64,24],[3,58,20,18,59,21],[10,341,272],[10,170,136,5,171,137],[9,68,28,13,69,29],[17,54,16,1,55,17],[10,370,292],[8,185,148,8,186,149],[10,68,28,14,69,29],[19,54,16,4,55,17],[9,401,316],[8,200,160,8,201,161],[8,75,30,16,76,31],[18,58,20,3,59,21],[10,428,336],[12,214,171,4,215,172],[18,75,30,2,76,31],[18,55,17,8,56,18],[12,462,362],[13,231,184,3,232,185],[8,81,32,16,82,33],[4,58,20,22,59,21],[17,489,384],[12,244,195,7,245,196],[16,81,32,7,82,33],[22,58,20,3,59,21],[16,525,416],[6,262,210,14,263,211],[12,87,35,16,88,36],[2,58,20,28,59,21],[19,553,432],[17,276,221,5,277,222],[10,87,35,21,88,36],[19,58,20,10,59,21],[18,589,459],[15,294,235,5,295,236],[11,86,34,23,87,35],[5,58,20,31,59,21],[21,627,497],[14,313,250,7,314,251],[21,87,35,17,88,36],[1,58,20,37,59,21],[23,656,512],[17,328,262,7,329,263],[28,87,35,7,88,36],[34,58,20,5,59,21],[25,698,554],[18,349,279,8,350,280],[20,92,37,20,93,38],[4,62,22,34,63,23],[26,736,580],[18,368,294,10,369,295],[24,92,37,18,93,38],[4,62,22,36,63,23],[29,772,604],[20,386,308,12,387,309],[29,92,37,14,93,38],[22,62,22,22,63,23],[30,816,640],[22,408,326,12,409,327],[24,97,39,22,98,40],[6,62,22,38,63,23],[32,864,680],[22,432,345,16,433,346],[28,97,39,22,98,40],[8,62,22,42,63,23]],s.getPositions=function(t){for(var r=new Array(t),e=0;t>e;e++)r[e]=0;for(e=0;t>e;e++){var n=c[e],o=1;for(a=0;t>a;a++)r[a]^=o,o=o<<1,o>=255&&(o^=285),o&128&&(n|=128),o&64&&(n|=64),o&32&&(n|=32),o&16&&(n|=16),o&8&&(n|=8),o&4&&(n|=4),o&2&&(n|=2),o&1&&(n|=1);var i=f.gexp(e);r[e]=i}return r},s.getRSBlocks=function(t,r){var e=function(t,r){switch(r){case N.L:return s.RS_BLOCK_TABLE[4*(t-1)+0];case N.M:return s.RS_BLOCK_TABLE[4*(t-1)+1];case N.Q:return s.RS_BLOCK_TABLE[4*(t-1)+2];case N.H:return s.RS_BLOCK_TABLE[4*(t-1)+3];default:return}}(t,r);if(void 0===e)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+r);for(var n=e.length/3,o=new Array,i=0;n>i;i++)for(var a=e[3*i+0],u=e[3*i+1],f=e[3*i+2],c=0;a>c;c++)o.push({totalCount:u,dataCount:f});return o},s.getMascher=function(t){switch(t){case U.PATTERN000:return function(t,r){return(t+r)%2==0};case U.PATTERN001:return function(t,r){return t%2==0};case U.PATTERN010:return function(t,r){return r%3==0};case U.PATTERN011:return function(t,r){return(t+r)%3==0};case U.PATTERN100:return function(t,r){return(Math.floor(t/2)+Math.floor(r/3))%2==0};case U.PATTERN101:return function(t,r){return t*r%2+t*r%3==0};case U.PATTERN110:return function(t,r){return(t*r%2+t*r%3)%2==0};case U.PATTERN111:return function(t,r){return(t*r%3+(t+r)%2)%2==0};default:throw new Error("bad maskPattern:"+t)}},s}(),t=function(t,r){this.typeNumber=t,this.errorCorrectLevel=r,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]},t.prototype={addData:function(t){var r=new H(t);this.dataList.push(r),this.dataCache=null},isDark:function(t,r){if(0>t||this.moduleCount<=t||0>r||this.moduleCount<=r)throw new Error(t+","+r);return this.modules[t][r]},getModuleCount:function(){return this.moduleCount},make:function(){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var t=0;t<this.moduleCount;t++){this.modules[t]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[t][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(!0,0),this.typeNumber>=7&&this.setupTypeNumber(!0),null==this.dataCache&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,0)},setupPositionProbePattern:function(t,r){for(var e=-1;7>=e;e++)if(!(-1>t+e||this.moduleCount<=t+e))for(var n=-1;7>=n;n++)-1>r+n||this.moduleCount<=r+n||(e>=0&&6>=e&&(0==n||6==n)||n>=0&&6>=n&&(0==e||6==e)||e>=2&&4>=e&&n>=2&&4>=n?this.modules[t+e][r+n]=!0:this.modules[t+e][r+n]=!1)},getBestMaskPattern:function(){for(var t=0,r=0,e=0;8>e;e++){this.make(),this.mapData(this.dataCache,e);var n=z.getLostPoint(this);(0==e||t>n)&&(t=n,r=e)}return r},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var r=8;r<this.moduleCount-8;r++)null==this.modules[6][r]&&(this.modules[6][r]=r%2==0)},setupPositionAdjustPattern:function(){for(var t=z.getPatternPosition(this.typeNumber),r=0;r<t.length;r++)for(var e=0;e<t.length;e++){var n=t[r],o=t[e];if(null==this.modules[n][o])for(var i=-2;2>=i;i++)for(var a=-2;2>=a;a++)-2==i||2==i||-2==a||2==a||0==i&&0==a?this.modules[n+i][o+a]=!0:this.modules[n+i][o+a]=!1}},setupTypeNumber:function(t){for(var r=z.getBCHTypeNumber(this.typeNumber),e=0;18>e;e++){var n=!t&&1==(r>>e&1);this.modules[Math.floor(e/3)][e%3+this.moduleCount-8-3]=n}for(e=0;18>e;e++){n=!t&&1==(r>>e&1);this.modules[e%3+this.moduleCount-8-3][Math.floor(e/3)]=n}},setupTypeInfo:function(t,r){for(var e=this.errorCorrectLevel<<3|r,n=z.getBCHTypeInfo(e),o=0;15>o;o++){var i=!t&&1==(n>>o&1);8>o?this.modules[o][8]=i:this.modules[o+1][8]=i,this.modules[this.moduleCount-1-o][8]=i}for(o=0;15>o;o++){i=!t&&1==(n>>o&1);8>o?this.modules[8][this.moduleCount-1-o]=i:this.modules[8][o>8?this.moduleCount-1-(o-1):this.moduleCount-1-o]=i}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,r){for(var e=0,n=-1,o=this.moduleCount-1,i=7,a=0,u=this.moduleCount-1;u>0;u-=2)for(6==u&&u--;;){for(var f=0;2>f;f++)if(null==this.modules[o][i]){var c=!1;a<t.length&&(c=1==(t[a]>>>e&1));z.getMascher(r)(o,i)&&(c=!c),this.modules[o][i]=c,e++,-1==e&&(a++,e=7)}if(o+=n,0>o||this.moduleCount<=o){o-=n,n=-n;break}i--}}},t.PAD0=236,t.PAD1=17,t.createData=function(r,e,n){for(var o=Z.getRSBlocks(r,e),i=new F,a=0;a<n.length;a++){var u=n[a];i.put(u.mode,4),i.put(u.getLength(),z.getLengthInBits(u.mode,r)),u.write(i)}for(var f=0,c=0;c<o.length;c++)f+=o[c].dataCount;if(i.getLengthInBits()>8*f)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+8*f+")");for(i.getLengthInBits()+4<=8*f&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;;){if(i.getLengthInBits()>=8*f)break;if(i.put(t.PAD0,8),i.getLengthInBits()>=8*f)break;i.put(t.PAD1,8)}return t.createBytes(i,o)},t.createBytes=function(t,r){for(var e=0,n=0,o=0,i=new Array(r.length),a=new Array(r.length),u=0;u<r.length;u++){var f=r[u].dataCount,c=r[u].totalCount-f;n=Math.max(n,f),o=Math.max(o,c),i[u]=new Array(f);for(var s=0;s<i[u].length;s++)i[u][s]=255&t.buffer[s+e];e+=f;var l=z.getErrorCorrectPolynomial(c),d=new V(i[u],l.getLength()-1),g=d.mod(l);a[u]=new Array(l.getLength()-1);for(s=0;s<a[u].length;s++){var h=g.get(g.getLength()-1-s);a[u][s]=h}}for(var p=new Array,v=0;n>v;v++)for(u=0;u<r.length;u++)v<i[u].length&&p.push(i[u][v]);for(v=0;o>v;v++)for(u=0;u<r.length;u++)v<a[u].length&&p.push(a[u][v]);return p},e=4,n=2,o=1,i=0,a={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,34,64,94],[6,34,66,98],[6,30,58,86,114],[6,28,54,80,106],[6,26,54,82,110],[6,30,58,86,114],[6,28,58,88,118],[6,34,62,90,118],[6,26,54,82,110,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,62,94,126,158],[6,26,62,98,134,170],[6,34,66,98,130,162],[6,30,62,94,126,158,190],[6,34,66,98,130,162,194],[6,30,62,94,126,158,190,222],[6,34,66,98,130,162,194,226],[6,30,62,94,126,158,190,222,254],[6,34,66,98,130,162,194,226,258]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var r=t<<10;a.getBCHDigit(r)-a.getBCHDigit(a.G15)>=0;)r^=a.G15<<a.getBCHDigit(r)-a.getBCHDigit(a.G15);return(t<<10|r)^a.G15_MASK},getBCHTypeNumber:function(t){for(var r=t<<12;a.getBCHDigit(r)-a.getBCHDigit(a.G18)>=0;)r^=a.G18<<a.getBCHDigit(r)-a.getBCHDigit(a.G18);return t<<12|r},getBCHDigit:function(t){for(var r=0;0!=t;)r++,t>>=1;return r},getPatternPosition:function(t){return a.PATTERN_POSITION_TABLE[t-1]},getMascher:Z.getMascher,getErrorCorrectPolynomial:function(t){for(var r=new V([1]),e=0;t>e;e++)r=r.multiply(new V([1,K.gexp(e)]));return r},getLengthInBits:function(t,r){if(r>=1&&10>r)switch(t){case e:return 10;case n:return 9;case o:return 8;case i:return 8;default:throw new Error("mode:"+t)}else if(27>r)switch(t){case e:return 12;case n:return 11;case o:return 16;case i:return 10;default:throw new Error("mode:"+t)}else{if(!(41>r))throw new Error("type:"+r);switch(t){case e:return 14;case n:return 13;case o:return 16;case i:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var r=t.getModuleCount(),e=0,n=0;r>n;n++)for(var o=0;r>o;o++){for(var i=0,a=t.isDark(n,o),u=-1;1>=u;u++)if(!(0>n+u||n+u>=r))for(var f=-1;1>=f;f++)0>o+f||o+f>=r||(0!=u||0!=f)&&a==t.isDark(n+u,o+f)&&i++;i>5&&(e+=3+i-5)}for(n=0;r-1>n;n++)for(o=0;r-1>o;o++){var c=0;t.isDark(n,o)&&c++,t.isDark(n+1,o)&&c++,t.isDark(n,o+1)&&c++,t.isDark(n+1,o+1)&&c++,(0==c||4==c)&&(e+=3)}for(n=0;r>n;n++)for(o=0;r-6>o;o++)t.isDark(n,o)&&!t.isDark(n,o+1)&&t.isDark(n,o+2)&&t.isDark(n,o+3)&&t.isDark(n,o+4)&&!t.isDark(n,o+5)&&t.isDark(n,o+6)&&(e+=40);for(o=0;r>o;o++)for(n=0;r-6>n;n++)t.isDark(n,o)&&!t.isDark(n+1,o)&&t.isDark(n+2,o)&&t.isDark(n+3,o)&&t.isDark(n+4,o)&&!t.isDark(n+5,o)&&t.isDark(n+6,o)&&(e+=40);for(var s=0,l=0;r>l;l++)for(var d=0;r>d;d++)t.isDark(l,d)&&s++;var g=Math.abs(100*s/r/r-50)/5;return e+=10*g}},u={MODE_NUMBER:e,MODE_ALPHA_NUM:n,MODE_8BIT_BYTE:o,MODE_KANJI:i},f={L:1,M:0,Q:3,H:2},c=0,s=1,l=2,d=3,g=4,h=5,p=6,v=7,w={PATTERN000:c,PATTERN001:s,PATTERN010:l,PATTERN011:d,PATTERN100:g,PATTERN101:h,PATTERN110:p,PATTERN111:v},m=function(t,r){this.mode=u.MODE_8BIT_BYTE,this.data=t,this.parsedData=r},m.prototype={getLength:function(t){return this.data.length},write:function(t){for(var r=0;r<this.data.length;r++)t.put(this.data.charCodeAt(r),8)}},y=function(t){var r,e,n=[];for(r=0;r<t.length;r++){var o=t.charAt(r);if("0"<=o&&"9">=o)n.push(o);else if(o.match(/[A-Z $%*+\-./:]/))n.push(o);else if(" "===o)n.push(o);else if("a"<=o&&"z">=o)e=o.toUpperCase(),n.push(e);else{if(o.match(/[\x00-\x1f\x7f]/))continue;if("¥"==o)n.push("\\");else if("`"==o)n.push("@");else if("{"==o)n.push("[");else if("}"==o)n.push("]");else if("~"==o)n.push("^");else if("´"==o||"'"==o||"’"==o||"‘"==o)n.push('"');else if("”"==o||"“"==o)n.push('"');else if("—"==o||"—"==o||"–"==o)n.push("-");else if(" "==o)n.push(" ");else if("　"==o)n.push(" ");else if("（"==o||"("==o)n.push("(");else if("）"==o||")"==o)n.push(")");else if("."==o)n.push(".");else if(","==o)n.push(",");else if(":"==o)n.push(":");else if(";"==o)n.push(";");else if("!"==o)n.push("!");else if("?"==o)n.push("?");else if("@"==o)n.push("@");else if("#"==o)n.push("#");else if("$"==o)n.push("$");else if("%"==o)n.push("%");else if("^"==o)n.push("^");else if("&"==o)n.push("&");else if("*"==o)n.push("*");else if("-"==o)n.push("-");else if("_"==o)n.push("_");else if("+"==o)n.push("+");else if("="==o)n.push("=");else if("/"==o)n.push("/");else if("\\"==o)n.push("\\");else if("|"==o)n.push("|");else if("<"==o)n.push("<");else if(">"==o)n.push(">");else if("`"==o||"'"==o)n.push("'");else if('"'==o)n.push('"');else if(o.match(/[\u0000-\u007F]/))n.push(o);else{var i="?";o.match(/[\u0080-\uFFFF]/)&&(i="?"),n.push(i)}}return n.join("")};b=function(t,r){this.typeNumber=t,this.errorCorrectLevel=r,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]},b.prototype.addData=function(t,r){switch(r=r||"UTF8",r.toUpperCase()){case"UTF8":this.addDataInUtf8(t);break;default:throw new Error("mode:"+r)}},b.prototype.addDataInUtf8=function(t){this.dataList.push(new m(y(t))),this.dataCache=null},b.prototype.isDark=function(t,r){if(0>t||this.moduleCount<=t||0>r||this.moduleCount<=r)throw new Error(t+","+r);return this.modules[t][r]},b.prototype.getModuleCount=function(){return this.moduleCount},b.prototype.make=function(){this.makeImpl(!1,this.getBestMaskPattern())},b.prototype.makeImpl=function(r,e){this.moduleCount=4*this.typeNumber+17,this.modules=function(t){for(var r=new Array(t),e=0;t>e;e++){r[e]=new Array(t);for(var n=0;t>n;n++)r[e][n]=null}return r}(this.moduleCount),this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(r,e),this.typeNumber>=7&&this.setupTypeNumber(r),null==this.dataCache&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},b.prototype.setupPositionProbePattern=function(t,r){for(var e=-1;7>=e;e++)if(!(-1>t+e||this.moduleCount<=t+e))for(var n=-1;7>=n;n++)-1>r+n||this.moduleCount<=r+n||(e>=0&&6>=e&&(0==n||6==n)||n>=0&&6>=n&&(0==e||6==e)||e>=2&&4>=e&&n>=2&&4>=n?this.modules[t+e][r+n]=!0:this.modules[t+e][r+n]=!1)},b.prototype.getBestMaskPattern=function(){for(var t=0,r=0,e=0;8>e;e++){this.makeImpl(!0,e);var n=a.getLostPoint(this);(0==e||t>n)&&(t=n,r=e)}return r},b.prototype.createMovieClip=function(t,r,e){var n=t.createEmptyMovieClip(r,e),o=1;this.make();for(var i=0;i<this.moduleCount;i++)for(var a=i*o,u=0;u<this.moduleCount;u++){var f=u*o,c=this.modules[i][u];c&&(n.beginFill(0,100),n.moveTo(f,a),n.lineTo(f+o,a),n.lineTo(f+o,a+o),n.lineTo(f,a+o),n.endFill())}return n},b.prototype.setupTimingPattern=function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var r=8;r<this.moduleCount-8;r++)null==this.modules[6][r]&&(this.modules[6][r]=r%2==0)},b.prototype.setupPositionAdjustPattern=function(){for(var t=a.getPatternPosition(this.typeNumber),r=0;r<t.length;r++)for(var e=0;e<t.length;e++){var n=t[r],o=t[e];if(null==this.modules[n][o])for(var i=-2;2>=i;i++)for(var u=-2;2>=u;u++)-2==i||2==i||-2==u||2==u||0==i&&0==u?this.modules[n+i][o+u]=!0:this.modules[n+i][o+u]=!1}},b.prototype.setupTypeNumber=function(t){for(var r=a.getBCHTypeNumber(this.typeNumber),e=0;18>e;e++){var n=!t&&1==(r>>e&1);this.modules[Math.floor(e/3)][e%3+this.moduleCount-8-3]=n}for(e=0;18>e;e++){n=!t&&1==(r>>e&1);this.modules[e%3+this.moduleCount-8-3][Math.floor(e/3)]=n}},b.prototype.setupTypeInfo=function(t,r){for(var e=this.errorCorrectLevel<<3|r,n=a.getBCHTypeInfo(e),o=0;15>o;o++){var i=!t&&1==(n>>o&1);8>o?this.modules[o][8]=i:this.modules[o+1][8]=i,this.modules[this.moduleCount-1-o][8]=i}for(o=0;15>o;o++){i=!t&&1==(n>>o&1);8>o?this.modules[8][this.moduleCount-1-o]=i:this.modules[8][o>8?this.moduleCount-1-(o-1):this.moduleCount-1-o]=i}this.modules[this.moduleCount-8][8]=!t},b.prototype.mapData=function(t,r){for(var e=0,n=-1,o=this.moduleCount-1,i=7,u=0,f=this.moduleCount-1;f>0;f-=2)for(6==f&&f--;;){for(var c=0;2>c;c++)if(null==this.modules[o][i]){var s=!1;u<t.length&&(s=1==(t[u]>>>e&1));a.getMascher(r)(o,i)&&(s=!s),this.modules[o][i]=s,e++,-1==e&&(u++,e=7)}if(o+=n,0>o||this.moduleCount<=o){o-=n,n=-n;break}i--}},b.errorCorrectLevel={L:1,M:0,Q:3,H:2},A="4",C="3",B="2",T="1",E=function(t,r){this._el=t,this._htOption=r},E.prototype.draw=function(t){function r(t,r){var e=document.createElement(t);if(r)for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e}function e(t){var r=this._htOption,e=r.width,n=r.height,o=r.colorDark,i=r.colorLight;this._el.style.width=e+"px",this._el.style.height=n+"px";for(var a=0;a<t.getModuleCount();a++)for(var u=0;u<t.getModuleCount();u++){var f=r.width/t.getModuleCount(),c=r.height/t.getModuleCount(),s=Math.ceil((u+1)*f)-Math.floor(u*f),l=Math.ceil((a+1)*f)-Math.floor(a*f),d=r.width/t.getModuleCount()*u,g=r.height/t.getModuleCount()*a,h=r.width/t.getModuleCount(),p=r.height/t.getModuleCount(),v=document.createElement("div");v.style.position="absolute",v.style.left=d+"px",v.style.top=g+"px",v.style.width=s+"px",v.style.height=l+"px",v.style.backgroundColor=t.isDark(a,u)?o:i,this._el.appendChild(v)}}function n(t){function r(){e.width=i,e.height=a,n.clearRect(0,0,i,a),n.fillStyle=o.colorDark;for(var r=0;r<t.getModuleCount();r++)for(var u=0;u<t.getModuleCount();u++){var f=o.width/t.getModuleCount(),c=o.height/t.getModuleCount(),s=u*f,l=r*c;t.isDark(r,u)&&n.fillRect(s,l,f,c)}}var e=document.createElement("canvas"),n=e.getContext("2d"),o=this._htOption,i=o.width,a=o.height;r(),this._el.appendChild(e)}var o=this._htOption;if("CANVAS"==o.drawing)n.call(this,t);else{e.call(this,t)}},E.prototype.clear=function(){this._el.innerHTML=""},E.prototype.makeCode=function(t){this.clear();var r=function(t,r){var e,n;if(void 0===r.typeNumber||isNaN(r.typeNumber))n=1;else{if(r.typeNumber<1||r.typeNumber>40)throw new Error("typeNumber must be between 1 and 40");n=r.typeNumber}e=void 0!==r.errorCorrectLevel&&-1<"LMQH".indexOf(r.errorCorrectLevel)?b.errorCorrectLevel[r.errorCorrectLevel]:b.errorCorrectLevel.H;var o=new b(n,e);return o.addData(t,r.utf8),o.make(),o};this.draw(r(t,this._htOption))},S=document.createElement("canvas").getContext,R=function(){var t=document.createElement("table");t.style.border="0px",t.style.margin="0px",t.style.padding="0px",t.style.borderCollapse="collapse",t.style.backgroundColor="#ffffff";var r=document.createElement("tbody");return t.appendChild(r),r.appendChild=function(t){var e=document.createElement("tr");e.style.border="0px",e.style.margin="0px",e.style.padding="0px",e.appendChild(t),r.parentNode.appendChild(e)},r},_=function(t,r){this._htOption=r,this._htOption.drawing=S?"CANVAS":"TABLE",this._oQRCode=null,this._el=document.getElementById(t),"TABLE"==this._htOption.drawing&&(this._elImage=R()),this._htOption.el=this._el,this._htOption.text=t},_.prototype.makeCode=function(t){if("CANVAS"==this._htOption.drawing){this._oQRCode=new E(this._el,this._htOption),this._oQRCode.makeCode(t)}else{this._el.innerHTML='<img src="'+this.makeImage(t)+'">',this._elImage=null}},_.prototype.makeImage=function(t){this._oQRCode=new b(this._htOption.typeNumber,this._htOption.errorCorrectLevel),this._oQRCode.addData(t),this._oQRCode.make();var r=this._oQRCode.getModuleCount(),e=this._htOption.width/r,n=this._htOption.height/r,o=document.createElement("canvas");o.width=this._htOption.width,o.height=this._htOption.height;for(var i=o.getContext("2d"),a=0;r>a;a++)for(var u=0;r>u;u++){i.fillStyle=this._oQRCode.isDark(a,u)?this._htOption.colorDark:this._htOption.colorLight;var f=Math.ceil((u+1)*e)-Math.floor(u*e),c=Math.ceil((a+1)*n)-Math.floor(a*n);i.fillRect(Math.round(u*e),Math.round(a*n),f,c)}return o.toDataURL()},_.prototype.clear=function(){"CANVAS"==this._htOption.drawing?this._oQRCode.clear():this._el.innerHTML=""};var L={};return L.CorrectLevel={L:1,M:0,Q:3,H:2},L.TypeNumber={},k=function(t,r){var e={};if("string"==typeof t)e.text=t;else{if("object"!=typeof t)return;for(var n in t)e[n]=t[n]}var o={text:"",width:256,height:256,colorDark:"#000000",colorLight:"#ffffff",correctLevel:L.CorrectLevel.H,typeNumber:4};for(n in r)o[n]=r[n];var i,a,u=document.getElementById(e.text||o.text);if(e.text||o.text)if(u){var f={};for(n in o)f[n]=o[n];for(n in e)f[n]=e[n];var c=new _(u,f);c.makeCode(f.text),a=c}else i="el not found!";else i="text is required";if(i)throw new Error(i);return a},k}(),O={MODE_8BIT_BYTE:4},P=function(t){this.mode=O.MODE_8BIT_BYTE,this.data=t,this.parsedData=this.parse(t)},P.prototype.getLength=function(){return this.parsedData.length},P.prototype.parse=function(t){for(var r=[],e=t.length,n=0;e>n;n++){var o=t.charCodeAt(n);o>65536?(r.push(240|o>>18&7),r.push(128|o>>12&63),r.push(128|o>>6&63),r.push(128|63&o)):o>2048?(r.push(224|o>>12&15),r.push(128|o>>6&63),r.push(128|63&o)):o>128?(r.push(192|o>>6&31),r.push(128|63&o)):r.push(o)}return r},P.prototype.write=function(t){for(var r=0;r<this.parsedData.length;r++)t.put(this.parsedData[r],8)},D=function(r,e){var n="string"==typeof r?document.getElementById(r):r;"object"==typeof e&&(e.text=e.text||n.innerHTML,e.correctLevel=void 0!==e.correctLevel?t.CorrectLevel.H:t.CorrectLevel.H),this.options=e;var o=function(r,e){var n;n=e||{},n.correctLevel=void 0!==n.correctLevel?n.correctLevel:t.CorrectLevel.H;for(var o=1;40>=o;o++){var i=new P(r,n.correctLevel);try{(new t(o,n.correctLevel)).addData(i),n.typeNumber=o;break}catch(a){}}};o(this.options.text,this.options),this.qrcode=new t(this.options.typeNumber,this.options.correctLevel),this.qrcode.addData(new P(this.options.text)),this.qrcode.make();var i=10;this.options.width=this.options.width||(this.qrcode.getModuleCount()+2*i)*this.options.size,this.options.height=this.options.height||(this.qrcode.getModuleCount()+2*i)*this.options.size,this.canvas=new M(this.options),this.canvas.draw(this.qrcode,this.options),this.img=document.createElement("img"),this.img.src=this.canvas.toDataURL(),n.appendChild(this.img)},M=function(t){var r=document.createElement("canvas");r.width=t.width,r.height=t.height;var e=r.getContext("2d");e.fillStyle=t.background||"#fff",e.fillRect(0,0,r.width,r.height),this.context=e,this.options=t,this.context.fillStyle=this.options.fill||"#000"},M.prototype.draw=function(t){var r=this.options,e=this.context,n=t.getModuleCount();r.size;var o,i,a=(r.width-2*r.margin)/n,u=(r.height-2*r.margin)/n;e.beginPath();for(var f=0;n>f;f++)for(var c=0;n>c;c++){var s=t.isDark(f,c),l=c*a+r.margin,d=f*u+r.margin;e.fillStyle=s?r.fill:"rgba(0,0,0,0)",e.fillRect(l,d,a,u)}e.fill()},M.prototype.toDataURL=function(){return this.context.canvas.toDataURL("image/png")},I={CorrectLevel:t.CorrectLevel},I}();

